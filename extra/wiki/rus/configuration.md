Помимо простого чтения файлов с рабочими скриптами и выполнения содержащихся там команд,  
PocketAdmin также имеет несколько вариантов настроек, с которыми вы можете более точно  
указать, как именно устройство должно вести себя после подключения.  
  
Такие изменения в поведении устройства осуществляются путем использования команд  
**предварительной конфигурации**. Их формат похож на команды **специальных функций**,  
где разрешена только одна команда на 1 строку. Однако, такие команды отличаются от  
всех обычных, потому что они действуют на само устройство и их необходимо выполнить до  
того, как компьютер начнет настройку вставленного устройства. Следовательно, команды  
**предварительной конфигурации** не предназначены для использования в рабочих скриптах,  
и вместо этого должны быть размещены в отдельном файле под названием config.txt.  
Точно так же команды из рабочих скриптов не допускаются внутри config.txt  
  
Нажтие кнопки дискового режима предотвращаяет запуск рабочего скрипта при подключении,  
но также и отключает некоторые команды **предварительной конфигурации**, а именно:  
"USE_HIDDEN_REGION", "SHOW_FAKE_CAPACITY **n**", "HID_ONLY_MODE" и "READ_ONLY_MODE".  
Состояние кнопки считывается во время запуска устройства, так что вам нужно будет  
удерживать её как во время вставления устройства, так и 1-2 секунды после этого.  
Перезагрузка в дисковый режим через многократное нажатие CapsLock (20 и более раз)  
имеет такой же эффект и позволяет снова получить полный доступ к устройству.  
  
### Ниже приведен полный список всех команд предварительной конфигурации:  
  
* "VID **x**"  --- Устанавливает значение VID для устройства  
* "PID **x**"  --- Устанавливает значение PID для устройства  
* "SERIAL **s**" --- Устанавливает серийный номер устройства  
* "HID_ONLY_MODE" --- Переключает устройство в режим только мышь+клавитура  
* "READ_ONLY_MODE"   --- делает USB диск доступным только для чтения  
* "USE_FINGERPRINTER" --- Включает сканер ОС  
* "USE_LAYOUT **s**" --- Загружает новую раскладку клавиатуры из файла  
* "USE_HIDDEN_REGION" --- Делает часть памяти на диске устройства недоступной для ПК  
* "SHOW_FAKE_CAPACITY **n**" --- Показывает компьютеру ненастоящий размер диска  
* "FIRST_INSERT_ONLY" --- Приводит к тому что рабочий скрипт запускается только 1 раз  
* "MASS_ERASE" --- Проводит полную очистку всех блоков памяти на диске устройства  
  
---
  
1. Команды "VID **x**", "PID **x**", "SERIAL **s**" заменяют значения используемые  
устройством по умолчанию. Значения VID, PID это 4-значные шестнадцатеричные числа,  
а серийный номер - строка из 12 символов, в которой разрешены только цифры 0-9 и  
заглавные буквы A-F.  Если какие-то символы в серийном номере отсутствуют или  
являются недопустимыми, то эти символы будут заменены на "0". Вот несколько  
примеров таких команд: "VID 0x046D", "PID 0xC228", "SERIAL 32500A4B11FF"  
  
2. Команда "HID_ONLY_MODE" указывает устройству работать только в режиме  
HID (клавиатура + мышь). Без этой команды устройство работает в режиме  
HID + MSD (клавиатура + мышь + USB диск). Это полезно в ситуациях когда на  
целевом ПК запрещены USB диски или же существует белый список разрешённых  
устройств, чьи VID+PID значения вы не знаете. Так что, не показывая дисковый  
интерфейс можно обойти подобные ограничения и продолжать работу с устройством.  
  
3. Команда "READ_ONLY_MODE" делает USB диск устройства доступным только для  
чтения (если он вообще доступен). Обычно встроенный в устройство USB диск  
исполняет команды компьютера и на чтение, и на запись. Это может быть  
полезным для защиты файлов на диске, например от удаления антивирусом.  
  
4. Команда "USE_FINGERPRINTER" позволяет определить установленную ОС.  
Для дополнительной информации можете изучить [эту страницу](https://github.com/krakrukra/PocketAdmin/blob/master/extra/wiki/rus/fingerprinter.md)  
  
5. Команда "USE_LAYOUT **s**" заменяет раскладку клавиатуры, то есть  
как именно устройство превращает ASCII символ в значение HID-код.  
Для дополнительной информации можете изучить [эту страницу](https://github.com/krakrukra/PocketAdmin/blob/master/extra/wiki/rus/layouts.md)  
  
6. Команда "USE_HIDDEN_REGION" считывает таблицу разделов (должна быть в MBR  
формате), находит первый блок памяти сразу после окончания первого раздела и  
назначает его блоком памяти номер 0 для команд чтения и записи. Это приводит  
к тому что весь первый раздел и сама таблица разделов становятся недоступными  
для компьютера. В этом случае вы сможете использовать USB диск на устройстве,  
но при этом конечный пользователь не увидит файлы с рабочими скриптами, настройками  
и прочим что использует устройство. Максимальный размер скрытой области составляет  
16 MiB, так что вам нужно будет обеспечить подходящую таблицу разделов перед тем  
как использовать эту команду. Например, если первый 1 мегабайт памяти занят  
самой таблицей разделов (+ пустая область), то тогда первый раздел должен быть  
15 MiB или меньше чтобы его можно было скрыть. Если область которую предлагается  
скрыть слишком велика, то команда игнорируется.  
  
7. Команда "SHOW_FAKE_CAPACITY **n**" указывает устройству сообщить ложную  
ёмкость диска. Она принимает десятичное число в качестве аргумента, которое  
будет новой ложной ёмкостью в MiB (например, "SHOW_FAKE_CAPACITY 2048" означает  
ложную ёмкость в 2GiB). Аргумент может быть любым значением от 97 до 65535, в  
противном случае команда игнорируется. Эту команду можно использовать, если вы  
хотите, чтобы устройство выглядело более похожим на обычный USB диск для  
конечного пользователя. "SHOW_FAKE_CAPACITY **n**" и "USE_HIDDEN_REGION" не  
мешают друг на другу, и их можно использовать одновременно, при необходимости.  
  
8. Команда "FIRST_INSERT_ONLY" - это еще одна функция скрытности. С этой  
командой устройство будет создавать новый файл в корневом каталоге, под  
названием NOINSERT. Если такой файл уже существует при подключении устройства,  
тогда исполнение рабочего скрипта при вставлении устройства будет заблокировано.  
Это даст вам возможность запускать рабочий скрипт только в первый раз когда  
устройство вставлено, но при последующем подключении рабочий скрипт запускаться  
уже не будет. Чтобы снова сработал рабочий скрипт при вставлении устройства,  
нужно будет удалить файл NOINSERT вручную. Так устройство будет выглядеть менее  
подозрительным для конечного пользователя, поскольку каждый раз при вставлении  
устройства там не будет никаких странных всплывающих окон. При этом, команда  
не мешает исполнению рабочих скриптов по запросу (через CapsLock)  
  
9. Команда "MASS_ERASE" стирает все блоки данных на устройстве, которое содержат,  
или ранее содержали какие-либо данные. Процесс будет запущен в следующий раз,  
когда устройство будет подключено, и это должно занять всего несколько секунд. После  
этого устройство должно снова отображаться как USB диск. Имейте в виду, конечно,  
что любые сохраненные файлы и таблица разделов будут потеряны. Эта команда в основном  
предназначена как быстрый способ, чтобы наверняка стереть все данные на диске,  
без необходимости вручную перезаписывать все логические блоки несколько раз.  
  