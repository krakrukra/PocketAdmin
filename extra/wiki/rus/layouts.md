Если в config.txt присутствует команда конфигурации "USE_LAYOUT **s**",  
то раскладка по умолчанию (QWERTY) заменяется новой. Вам нужно будет  
иметь на устройстве необходимый файл раскладки в каталоге /kblayout/  
и указать его имя как аргумент команды. Например, "USE_LAYOUT fra_FR"  
укажет устройству загрузить раскладку из файла /kblayout/fra_FR  
Имейте в виду, что имя файла должно умещаться в формате 8.3, и только  
буквы A-Z, a-z, цифры 0-9, знаки подчеркивания и точки разрешены.  
  
Файлы раскладки используются для преобразования печатных ASCII  
символов (используются в рабочих скриптах) в HID-коды вместе с  
соответствующими модификаторами. Это преобразование происходит  
путем вычитания 32 из ASCII значения символа (чтобы избежать  
непечатные символы), а затем полученное число используется в  
качестве индекса для массива байтов из 95 элементов. Этот  
байтовый массив расположен в начале файла, поэтому байт 0 в  
файле соответствует коду ASCII 32 (пробел), байт 1 это код  
ASCII 33 (восклицательный знак), байт 2 это ASCII 34 (кавычки)  
и так далее, вплоть до (и включая) байт 94.  
  
Эти байты содержат соответствующие HID-коды в 7 наименее значимых  
битах и индикатор SHIFT в самом значительном бите. Если бит 7  
содержит 1, модификатор SHIFT будет применен. Например, в файле  
обычной английской раскладки (США) байт 33 (для символа ASCII "A")  
будет содержать значение 0x84, а байт 65 (для ASCII "a") будет  
содержать значение 0x04. Оба символа имеют одинаковый HID-код 0x04,  
но для "A" установлен бит-индикатор, что нужно добавить SHIFT.  
  
Для некоторых раскладок также необходимо применять модификатор AltGr.  
Это то, для чего предназначены последние 12 байт. В этой части файла  
находится битовый массив с индикаторами AltGr. То есть, в байте 95  
Наименее значимый бит соответствует коду 32 ASCII, следующий по  
значимости бит соответствует коду ASCII 33 итд. Для кода ASCII 40  
используется наименее значимый бит следующего байта (байт 96), и так  
продолжается до конца файла раскладки.  
Например с французской раскладкой вам нужен AltGr, чтобы ввести символ  
"#". Код ASCII для символа "#" - это 35, и после вычитания 32 вы получаете  
индекс бита = 3; этот бит в массиве AltGr должен содержать 1. Этот бит  
находится в байте 95 файла раскладки. Другие символы (ASCII коды 32-39)  
не требуют нажатия AltGr, поэтому этот бит - единственный, что содержит 1.  
Значит итоговое значение байта 95 в файле раскладки = 0x08.  
  
В этом репозитории есть некоторые существующие файлы раскладки  
(В [/extra/payloads/FeatureTesting/LayoutTest/kblayout/](https://github.com/krakrukra/PocketAdmin/tree/master/extra/payloads/FeatureTesting/LayoutTest/kblayout)).  
Вы также можете сделать свой собственный, если нужно. Проще всего  
будет скопировать существующий файл раскладки (предпочтительно с  
той раскладкой, которая похожа на вашу), а затем вставить туда  
правильные значения используя шестнадцатеричный редактор.  
  
Чтобы узнать, какие HID-коды соответствуют каким клавишам в  
раскладке США, можно прочитать [этот документ](https://usb.org/document-library/hid-usage-tables-14), стр. 89-96.  
HID-коды привязаны к расположению клавиши, а не к символу,  
который на ней нарисован; Например французские клавиатуры  
имеют раскладку AZERTY. Это означает, что на французской  
клавиатуре символ "A" нарисован там же, где в США рисуют  
символ "Q". Раз это одна и та же кнопка, у них одинаковый  
HID-код 0x14. Если PocketAdmin настроен на использование  
французской раскладки и видит ASCII "a" в рабочем скрипте,  
он должен будет отправить HID-код американской "q". Для  
этого в файле раскладки байт 65 (ASCII "a") должен  
содержать HID-код американской "Q".  
  