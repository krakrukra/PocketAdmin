Большинство badusb устройств начинают выполнять рабочий скрипт,  
сразу после подключения в целевую машину. В каком-то смысле это  
идеальный момент для запуска скрипта, так как именно в это время  
пользователь может ожидать появления каких-то всплывающих окон,  
экран не будет заблокирован, а сам пользователь не нажимает активно  
какие-то кнопки на обычной клавиатуре, что могло бы помешать скрипту.  
Однако такой подход накладывает ограничения на количество рабочих  
скриптов, которые вы можете нести на устройстве одновременно.  
  
В ситуациях, когда вам нужно больше рабочих скриптов (например,  
один устанавливает ПО, другой делает удалённый доступ, третий  
извлекает какие-то данные, итд.) и когда у вас также есть  
возможность выбрать нужный скрипт вручную, вы можете использовать  
другой подход. Этот подход называется скрипт по запросу.  
  
Этот новый подход позволяет хранить до 17 дополнительных рабочих  
скриптов в специальном каталоге /ondemand/. Имена этих файлов  
должны быть в формате "scriptNN.txt", где NN - число от 3  
до 19, с первой цифрой, установленной на 0, если необходимо.  
То есть путь к файлу должен быть /ondemand/script03.txt,  
/ondemand/script04.txt, /ondemand/script05.txt итд, вплоть до  
/ondemand/script19.txt. Чтобы вызвать конкретный скрипт, вы  
должны использовать клавишу CapsLock на обычной клавиатуре,  
нажав на нее столько раз, сколько указано в названии скрипта.  
То есть, если вы хотите вызвать script05.txt, вы должны будете  
нажать клавишу CapsLock 5 раз подряд. Если в течение следующей  
1 секунды больше не будет нажатий CapsLock, устройство  
посчитает это концом последовательности и начинёт выполнять  
выбранный рабочий скрипт. Как только этот рабочий скрипт будет  
завершён, устройство вернется в состояние ожидания. Тогда вы  
сможете вызвать новый рабочий скрипт по запросу.  
  
Если вы нажмете на CapsLock 1 или 2 раза, то устройство ничего  
не сделает. Последовательность из 20 или более нажатий CapsLock   
это особый сигнал. Устройство само отключится от шины USB и  
затем снова подключится так, будто была нажата кнопка дискового  
режима. Это позволяет фактически использовать кнопку дискового  
режима без необходимости разбирать устройство и нажмать реальную  
кнопку. Если вы введете последовательность из 20 или более нажатий  
CapsLock снова, устройство перейдет в режим DFU без каких-либо  
вариантов выйти, кроме как вытащить устройство из ПК.  
  
Рабочие скрипты по запросу работают независимо от того,  
использовалась ли кнопка дискового режима при подключении  
или нет. Они также не зависят от всех других функций,  
например, нет никакой разницы, если у вас включен сканер ОС,  
режим HID\_ONLY\_MODE, итд. Если запрошенный файл скрипта  
не найден, устройство останется в состоянии ожидания, но  
последовательности из 20 и более нажатий будут работать  
всегда, даже если на устройстве нет файловой системы.  
  
Скрипты по запросу на macOS работать не будут, из-за того  
что обычно на этой системе статус LED индикаторов между  
разными клавиатурами не синхронизирован.  
  